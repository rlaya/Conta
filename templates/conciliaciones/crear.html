% extends "base.html" %}

{% block content %}
<h2>➕ Crear Conciliación Bancaria</h2>

<form method="POST" style="max-width: 600px;">
  <div style="margin-bottom: 15px;">
    <label for="id_cuenta">Cuenta bancaria:</label><br>
    <select name="id_cuenta" id="id_cuenta" required style="width: 100%; padding: 8px;">
      <option value="">-- Seleccione --</option>
      {% for cuenta in cuentas %}
        <option value="{{ cuenta[0] }}">{{ cuenta[1] }} ({{ cuenta[2] }})</option>
      {% endfor %}
    </select>
  </div>

  <div style="margin-bottom: 15px;">
    <label for="fecha_inicio">Fecha de inicio:</label><br>
    <input type="date" name="fecha_inicio" id="fecha_inicio" required style="width: 100%; padding: 8px;">
  </div>

  <div style="margin-bottom: 15px;">
    <label for="fecha_fin">Fecha de fin:</label><br>
    <input type="date" name="fecha_fin" id="fecha_fin" required style="width: 100%; padding: 8px;">
  </div>

  <div style="margin-bottom: 15px;">
    <label for="saldo_banco">Saldo según banco (₡):</label><br>
    <input type="number" step="0.01" name="saldo_banco" id="saldo_banco" required min="0" style="width: 100%; padding: 8px;">
  </div>

  <div style="margin-top: 20px;">
    <button type="submit" style="background: #27ae60; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer;">✅ Crear Conciliación</button>
    <a href="{{ url_for('conciliaciones_listar') }}" style="display: inline-block; margin-left: 10px; padding: 10px 20px; background: #7f8c8d; color: white; text-decoration: none; border-radius: 4px;">Cancelar</a>
  </div>
</form>

<script>
  // Validar que fecha_fin >= fecha_inicio
  document.getElementById('fecha_fin').addEventListener('change', function() {
    const inicio = document.getElementById('fecha_inicio').value;
    const fin = this.value;
    if (inicio && fin && new Date(fin) < new Date(inicio)) {
      alert('La fecha de fin no puede ser anterior a la de inicio.');
      this.value = '';
    }
  });
</script>
{% endblock %}