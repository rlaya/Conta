{% extends "base.html" %}

{% block content %}
<h2>ğŸ“Š Conciliaciones Bancarias</h2>


<div class="d-flex justify-content-between align-items-center mb-4 flex-wrap gap-2">
  <div>
      <a href="{{ url_for('menu') }}" class="btn btn-secondary me-2">MenÃº Principal</a>
      <a href="{{ url_for('conciliaciones_crear') }}" class="btn btn-primary">â• Nueva ConciliaciÃ³n</a>
  </div> 
</div>

{% if conciliaciones %}
<table class="tabla">
  <thead>
    <tr>
      <th>ID</th>
      <th>Banco</th>
      <th>Periodo</th>
      <th>Saldo Banco</th>
      <th>Saldo Sistema</th>
      <th>Diferencia</th>
      <th>Estatus</th>
      <th>Acciones</th>
    </tr>
  </thead>
  <tbody>
    {% for c in conciliaciones %}
    <tr>
      <td>{{ c[0] }}</td>
      <td>{{ c[1] }}</td>
      <td>{{ c[2] }} â†’ {{ c[3] }}</td>
      <td style="text-align: right;">â‚¡{{ "%.2f"|format(c[4]) }}</td>
      <td style="text-align: right;">â‚¡{{ "%.2f"|format(c[5]) }}</td>
      <td style="text-align: right; color: {% if c[6] != 0 %}red{% else %}green{% endif %};">
        â‚¡{{ "%.2f"|format(c[6]) }}
      </td>
      <td>
        {% if c[7] == 'conciliada' %}
          <span style="color: green;">âœ”ï¸ Conciliada</span>
        {% else %}
          <span style="color: orange;">â³ Pendiente</span>
        {% endif %}
      </td>
      <td>
        {% if c[7] == 'pendiente' %}
          <a href="{{ url_for('conciliar_conciliacion_view', id_conc=c[0]) }}" 
             style="background: #3498db; color: white; padding: 5px 10px; text-decoration: none; border-radius: 3px; font-size: 0.85em; display: inline-block; margin-right: 5px;">
            âœ… Conciliar
          </a>
        {% endif %}
        {% if c[7] == 'conciliada' %}
          <a href="{{ url_for('ver_conciliacion', id_conc=c[0]) }}" 
             style="background: #9b59b6; color: white; padding: 5px 10px; text-decoration: none; border-radius: 3px; font-size: 0.85em; display: inline-block;">
            ğŸ‘ï¸ Ver detalle
          </a>
        {% endif %}
        {% if c[7] not in ['pendiente', 'conciliada'] %}
          <span style="color: #95a5a6;">â€”</span>
        {% endif %}
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% else %}
<p>No hay conciliaciones registradas.</p>
{% endif %}

<style>
.tabla {
  width: 100%;
  border-collapse: collapse;
  margin-top: 10px;
}
.tabla th, .tabla td {
  padding: 10px;
  text-align: left;
  border-bottom: 1px solid #ddd;
}
.tabla th {
  background-color: #f2f2f2;
}
.btn {
  display: inline-block;
  padding: 8px 16px;
  background-color: #3498db;
  color: white;
  text-decoration: none;
  border-radius: 4px;
}
</style>
{% endblock %}